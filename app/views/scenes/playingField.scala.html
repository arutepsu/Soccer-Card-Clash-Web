@()(implicit request: play.api.mvc.RequestHeader, messages: play.api.i18n.Messages)
@import helper._
@import views.html.components.overlay
@import views.html.sceneComponents.playersBar
@defining(play.filters.csrf.CSRF.getToken) { csrfOpt =>

<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/scenes/playingField.css")'>
<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/sceneComponents/gameCard.css")'>
<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/base/gameButton.css")'>
<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/sceneComponents/playersBar.css")'>
<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/sceneComponents/fieldCards.css")'>
<link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/sceneComponents/handCards.css")'>
<!-- <link rel="stylesheet" href='@routes.Assets.versioned("stylesheets/components/gameAlert.css")'> -->

@csrfOpt.map { t =>
  <meta name="csrf-token" content="@t.value">
}

@views.html.components.navBar()

<!-- Root for WebSceneManager: it reads data-scene and builds that scene -->
<div id="app" data-scene="PlayingField">

  <div class="scene scene--playingfield is-active" aria-live="polite">
    @views.html.sceneComponents.playersBar()

    <main class="board" role="main">
      <!-- Server routes for client JS -->
      <nav id="nav-bar"
           aria-label="Navigation menu"
           data-href-defenders='@routes.UiController.attackerDefenders().url'
           data-href-hand='@routes.UiController.attackerHand().url'>
      </nav>

      <section id="field" aria-label="Defender Field">
        <div class="card-bar-frame" id="field-frame"></div>
      </section>

      <aside id="action-bar" aria-label="Action buttons"></aside>
    </main>

    <footer id="hand-row" aria-label="Attacker Hand and Avatar">
      <section id="hand" aria-label="Attacker Hand"></section>
      <section id="attacker-avatar-box" aria-label="Current Attacker"></section>
    </footer>

    <div id="input-blocker" class="input-blocker" aria-hidden="true"></div>
  </div>

  @overlay(
    id = "overlay",
    title = "About the Game",
    messageHtml = Html(""),
    bgImagePath = "images/frames/overlay.png",
    safeTop = "16%", safeRight = "8%", safeBottom = "16%", safeLeft = "8%"
  )

  <button type="button" data-open-overlay hidden aria-hidden="true" tabindex="-1">Open Overlay</button>
</div>

<!--  jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Global runtime bootstrap (creates WebSceneManager, injects API+Overlay, builds current scene) -->
<script type="module" src='@routes.Assets.versioned("javascripts/app.js")'></script>

<head>
  <!-- ... -->
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, minimum-scale=1, maximum-scale=1, user-scalable=no">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- ... -->
</head>

<div id="rotate-notice" class="rotate-notice" style="display:none;">
  Please rotate screen.
</div>

}
